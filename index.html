<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3DPS.ca ‚Äî Canada's 3D Print Marketplace</title>
<meta name="description" content="Canada's marketplace for 3D printed goods. Buy unique items, request custom prints, and connect with local makers." />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800;900&family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;1,400&display=swap" rel="stylesheet" />
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<style>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   3DPS.CA ‚Äî DESIGN SYSTEM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
:root {
  --orange:#0A7A4B; --orange2:#12A868; --orange-pale:#E8F7F1;
  --dark:#0A1A12; --mid:#1A3D2B; --muted:#6B8C7A;
  --cream:#F0FAF5; --white:#FFFFFF;
  --border:#C8E8D8; --border2:#D8F0E4;
  --green:#0A7A4B; --green-pale:#E8F7F1;
  --red:#C0392B; --blue:#1A5DAD;
  --shadow:0 2px 16px rgba(26,18,16,.09);
  --shadow-lg:0 8px 40px rgba(26,18,16,.15);
  --r:12px; --r-sm:8px; --r-lg:20px; --r-pill:999px;
  --font-display:'Outfit',sans-serif;
  --font-body:'Plus Jakarta Sans',sans-serif;
}
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:var(--font-body);background:var(--cream);color:var(--dark);overflow-x:hidden;-webkit-font-smoothing:antialiased;touch-action:manipulation}
a{color:inherit;text-decoration:none}
button{font-family:var(--font-body);cursor:pointer}
img{display:block;max-width:100%}
input,select,textarea{font-family:var(--font-body)}

/* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
::-webkit-scrollbar{width:6px;height:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--border);border-radius:3px}

/* ‚îÄ‚îÄ UTILITIES ‚îÄ‚îÄ */
.sr-only{position:absolute;width:1px;height:1px;overflow:hidden;clip:rect(0,0,0,0)}
.flex{display:flex}.flex-1{flex:1}.items-center{align-items:center}
.gap-2{gap:8px}.gap-3{gap:12px}.gap-4{gap:16px}
.text-orange{color:var(--orange)}.text-muted{color:var(--muted)}.text-white{color:#fff}
.font-display{font-family:var(--font-display)}
.fw-700{font-weight:700}.fw-800{font-weight:800}
.mt-4{margin-top:16px}.mb-4{margin-bottom:16px}

/* ‚îÄ‚îÄ BADGES ‚îÄ‚îÄ */
.badge{display:inline-flex;align-items:center;gap:4px;padding:3px 10px;border-radius:var(--r-pill);font-size:11px;font-weight:700;letter-spacing:.04em;text-transform:uppercase}
.badge-local{background:var(--green-pale);color:var(--green);border:1px solid #b2ddc0}
.badge-custom{background:#fff0e6;color:var(--orange);border:1px solid #ffd0a8}
.badge-new{background:var(--orange);color:#fff}
.badge-featured{background:#FFF8DC;color:#9A6700;border:1px solid #FFE08A}
.badge-sale{background:var(--red);color:#fff}

/* ‚îÄ‚îÄ BUTTONS ‚îÄ‚îÄ */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:11px 24px;border-radius:var(--r-pill);font-size:15px;font-weight:600;border:none;transition:transform .15s,opacity .15s,background .15s;white-space:nowrap}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.btn-primary{background:var(--orange);color:#fff}
.btn-primary:hover{background:var(--orange2)}
.btn-outline{background:transparent;border:2px solid var(--dark);color:var(--dark)}
.btn-outline:hover{background:var(--dark);color:#fff}
.btn-outline-white{background:transparent;border:2px solid rgba(255,255,255,.5);color:#fff}
.btn-outline-white:hover{border-color:#fff;background:rgba(255,255,255,.1)}
.btn-white{background:#fff;color:var(--orange);border:2px solid transparent}
.btn-white:hover{background:#fff3e8}
.btn-ghost{background:transparent;color:var(--muted);border:none;padding:8px}
.btn-ghost:hover{color:var(--dark)}
.btn-sm{padding:8px 16px;font-size:13px}
.btn-lg{padding:14px 32px;font-size:16px}

/* ‚îÄ‚îÄ INPUTS ‚îÄ‚îÄ */
.input{width:100%;padding:11px 14px;border:1.5px solid var(--border);border-radius:var(--r-sm);font-size:14px;outline:none;transition:border-color .15s;background:#fff}
.input:focus{border-color:var(--orange)}
.input-group{display:flex;flex-direction:column;gap:5px;margin-bottom:14px}
.input-group label{font-size:13px;font-weight:600;color:var(--mid)}
.input-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
select.input{cursor:pointer}
textarea.input{resize:vertical;min-height:100px}

/* ‚îÄ‚îÄ CARDS ‚îÄ‚îÄ */
.card{background:var(--white);border-radius:var(--r);border:1px solid var(--border);box-shadow:var(--shadow)}

/* ‚îÄ‚îÄ PRODUCT CARD ‚îÄ‚îÄ */
.product-card{background:var(--white);border-radius:var(--r);border:1px solid var(--border);box-shadow:var(--shadow);cursor:pointer;transition:transform .2s,box-shadow .2s;overflow:hidden;position:relative}
.product-card:hover{transform:translateY(-4px);box-shadow:var(--shadow-lg)}
.product-card-img{aspect-ratio:1;display:flex;align-items:center;justify-content:center;font-size:60px;position:relative;overflow:hidden}
.product-card-img-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,transparent 60%,rgba(26,18,16,.1))}
.product-card-badges{position:absolute;top:10px;left:10px;display:flex;flex-direction:column;gap:5px}
.product-card-wish{position:absolute;top:10px;right:10px;background:rgba(255,255,255,.92);border:none;border-radius:50%;width:34px;height:34px;display:flex;align-items:center;justify-content:center;font-size:17px;cursor:pointer;transition:transform .15s,background .15s;box-shadow:0 1px 6px rgba(0,0,0,.12)}
.product-card-wish:hover{transform:scale(1.12);background:#fff}
.product-card-body{padding:14px}
.product-shop{font-size:11px;color:var(--muted);font-weight:500;margin-bottom:3px;display:flex;align-items:center;gap:5px}
.shop-dot{width:7px;height:7px;border-radius:50%;background:var(--green);flex-shrink:0}
.product-title{font-size:14px;font-weight:500;color:var(--dark);margin-bottom:8px;line-height:1.35;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.product-footer{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:4px}
.product-price{font-family:var(--font-display);font-size:18px;font-weight:700;color:var(--dark)}
.product-stars{font-size:11px;color:#E8A000;display:flex;align-items:center;gap:3px}
.product-location{font-size:11px;color:var(--green);font-weight:500;margin-top:5px}

/* ‚îÄ‚îÄ SECTION ‚îÄ‚îÄ */
.section{padding:56px 24px}
.section-inner{max-width:1280px;margin:0 auto}
.section-header{display:flex;justify-content:space-between;align-items:flex-end;margin-bottom:28px;flex-wrap:wrap;gap:12px}
.section-title{font-family:var(--font-display);font-size:26px;font-weight:700;letter-spacing:-.02em}
.section-title span{color:var(--orange)}
.section-link{font-size:14px;font-weight:600;color:var(--orange);border-bottom:1.5px solid transparent;transition:border-color .15s}
.section-link:hover{border-bottom-color:var(--orange)}

/* ‚îÄ‚îÄ GRID ‚îÄ‚îÄ */
.product-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(210px,1fr));gap:18px}
.cat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:12px}

/* ‚îÄ‚îÄ TOPBAR ‚îÄ‚îÄ */
#topbar{background:#051a0e;color:rgba(255,255,255,.7);font-size:12px;text-align:center;padding:8px 24px;letter-spacing:.03em}
#topbar a{color:var(--orange2)}
#topbar strong{color:#fff}

/* ‚îÄ‚îÄ NAVBAR ‚îÄ‚îÄ */
#navbar{background:var(--white);border-bottom:1.5px solid var(--border);position:sticky;top:0;z-index:90;box-shadow:0 2px 12px rgba(0,0,0,.06)}
.nav-inner{max-width:1280px;margin:0 auto;padding:0 24px;display:flex;align-items:center;gap:16px;height:66px}
.logo{font-family:var(--font-display);font-size:26px;font-weight:800;color:var(--orange);letter-spacing:-.04em;flex-shrink:0;cursor:pointer}
.logo span{color:var(--dark)}
.searchbar{flex:1;max-width:540px;display:flex;border:2px solid var(--dark);border-radius:var(--r-pill);overflow:hidden;transition:border-color .2s}
.searchbar:focus-within{border-color:var(--orange)}
.searchbar input{flex:1;border:none;outline:none;padding:9px 18px;font-size:14px;background:transparent}
.searchbar-btn{background:var(--orange);border:none;padding:9px 18px;color:#fff;font-size:17px;transition:background .15s;cursor:pointer}
.searchbar-btn:hover{background:var(--orange2)}
.nav-actions{display:flex;align-items:center;gap:6px;margin-left:auto}
.nav-link{font-size:14px;font-weight:500;color:var(--mid);padding:8px 12px;border-radius:var(--r-sm);transition:background .15s,color .15s;border:none;background:none}
.nav-link:hover{background:var(--cream);color:var(--orange)}
.cart-btn{position:relative;background:none;border:none;font-size:22px;padding:6px;cursor:pointer;color:var(--dark)}
.cart-count{position:absolute;top:0;right:0;background:var(--orange);color:#fff;border-radius:50%;width:17px;height:17px;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center}

/* ‚îÄ‚îÄ CAT NAV ‚îÄ‚îÄ */
#catnav{background:var(--white);border-bottom:1px solid var(--border)}
.catnav-inner{max-width:1280px;margin:0 auto;padding:0 24px;display:flex;gap:2px;overflow-x:auto;scrollbar-width:none}
.catnav-inner::-webkit-scrollbar{display:none}
.catnav-link{font-size:13px;font-weight:500;color:var(--muted);padding:11px 14px;border-bottom:2.5px solid transparent;white-space:nowrap;cursor:pointer;transition:color .15s,border-color .15s;background:none;border-left:none;border-right:none;border-top:none}
.catnav-link:hover,.catnav-link.active{color:var(--orange);border-bottom-color:var(--orange)}

/* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
#hero{background:linear-gradient(135deg,#051a0e 0%,#0a2e1a 55%,#0d4a28 100%);padding:72px 24px;text-align:center;position:relative;overflow:hidden}
#hero::before{content:'';position:absolute;inset:0;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23E85D04' fill-opacity='0.06'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/svg%3E");opacity:.5}
.hero-inner{position:relative;z-index:1;max-width:740px;margin:0 auto}
.hero-pill{display:inline-flex;align-items:center;gap:6px;background:rgba(232,93,4,.18);border:1px solid rgba(232,93,4,.3);border-radius:var(--r-pill);padding:5px 16px;font-size:12px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:var(--orange2);margin-bottom:22px}
.hero-h1{font-family:var(--font-display);font-size:clamp(34px,6vw,62px);font-weight:800;color:#fff;line-height:1.05;letter-spacing:-.03em;margin-bottom:18px}
.hero-h1 em{color:var(--orange2);font-style:normal}
.hero-sub{font-size:17px;color:rgba(255,255,255,.65);line-height:1.65;margin-bottom:32px;max-width:560px;margin-left:auto;margin-right:auto}
.hero-ctas{display:flex;gap:12px;justify-content:center;flex-wrap:wrap}
.hero-stats{display:flex;gap:36px;justify-content:center;margin-top:52px;flex-wrap:wrap;padding-top:40px;border-top:1px solid rgba(255,255,255,.1)}
.hero-stat-num{font-family:var(--font-display);font-size:30px;font-weight:800;color:var(--orange2);line-height:1}
.hero-stat-label{font-size:12px;color:rgba(255,255,255,.45);margin-top:4px;letter-spacing:.03em}

/* ‚îÄ‚îÄ LOCAL BAR ‚îÄ‚îÄ */
#localbar{background:var(--white);border-bottom:1px solid var(--border);padding:14px 24px}
.localbar-inner{max-width:1280px;margin:0 auto;display:flex;align-items:center;gap:12px;flex-wrap:wrap}
.localbar-label{font-size:13px;font-weight:600;color:var(--mid);white-space:nowrap}
.localbar-input{display:flex;border:1.5px solid var(--border);border-radius:var(--r-sm);overflow:hidden;flex:0 0 auto;width:220px}
.localbar-input input{border:none;outline:none;padding:7px 12px;font-size:13px;width:100%}
.localbar-input button{background:var(--orange);border:none;padding:7px 14px;color:#fff;font-size:12px;font-weight:600;cursor:pointer;white-space:nowrap}
.city-chip{background:var(--orange-pale);color:var(--orange);border:1px solid #ffcfaa;border-radius:var(--r-pill);padding:5px 13px;font-size:12px;font-weight:500;cursor:pointer;transition:background .15s;white-space:nowrap}
.city-chip:hover{background:#ffe0cc}
.city-chip.active{background:var(--orange);color:#fff;border-color:var(--orange)}
.platform-fee-note{margin-left:auto;display:flex;align-items:center;gap:6px;font-size:12px;color:var(--green);font-weight:500;background:var(--green-pale);border:1px solid #b2ddc0;border-radius:var(--r-pill);padding:4px 12px;white-space:nowrap}

/* ‚îÄ‚îÄ CATEGORY CARD ‚îÄ‚îÄ */
.cat-card{background:var(--white);border:1.5px solid var(--border);border-radius:var(--r);padding:18px 12px;text-align:center;cursor:pointer;transition:border-color .15s,transform .15s,box-shadow .15s;display:flex;flex-direction:column;align-items:center;gap:7px}
.cat-card:hover{border-color:var(--orange);transform:translateY(-2px);box-shadow:var(--shadow)}
.cat-card-icon{font-size:34px}
.cat-card-name{font-size:13px;font-weight:600;color:var(--dark)}
.cat-card-count{font-size:11px;color:var(--muted)}

/* ‚îÄ‚îÄ HOW IT WORKS ‚îÄ‚îÄ */
#how{background:#051a0e}
#how .section-title{color:#fff}
.steps-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:20px;margin-top:36px}
.step-card{background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:var(--r-lg);padding:26px 22px;text-align:center;transition:background .2s,transform .2s}
.step-card:hover{background:rgba(255,255,255,.08);transform:translateY(-2px)}
.step-icon{font-size:42px;margin-bottom:14px}
.step-num{font-family:var(--font-display);font-size:11px;font-weight:700;letter-spacing:.12em;color:var(--orange);text-transform:uppercase;margin-bottom:7px}
.step-title{font-family:var(--font-display);font-size:18px;font-weight:700;color:#fff;margin-bottom:9px}
.step-desc{font-size:13px;color:rgba(255,255,255,.5);line-height:1.65}

/* ‚îÄ‚îÄ CUSTOM ORDER BANNER ‚îÄ‚îÄ */
.custom-banner{background:linear-gradient(135deg,#fff8f0,#ffe8cc);border:1.5px solid #ffd0a8;border-radius:var(--r-lg);padding:36px 40px;display:flex;align-items:center;gap:32px;flex-wrap:wrap}
.custom-banner-icon{font-size:68px;flex-shrink:0}
.custom-banner h2{font-family:var(--font-display);font-size:24px;font-weight:700;letter-spacing:-.02em;margin-bottom:8px}
.custom-banner p{font-size:14px;color:var(--mid);line-height:1.65;max-width:460px}
.custom-banner .btn{margin-top:16px}

/* ‚îÄ‚îÄ SELLER CTA ‚îÄ‚îÄ */
#seller-cta{background:var(--orange);text-align:center;padding:60px 24px}
#seller-cta h2{font-family:var(--font-display);font-size:clamp(26px,4vw,38px);font-weight:800;color:#fff;letter-spacing:-.02em;margin-bottom:10px}
#seller-cta p{font-size:17px;color:rgba(255,255,255,.82);margin-bottom:28px;max-width:520px;margin-left:auto;margin-right:auto}
.seller-perks{display:flex;gap:28px;justify-content:center;margin-top:28px;flex-wrap:wrap}
.seller-perk{display:flex;align-items:center;gap:7px;font-size:13px;color:rgba(255,255,255,.88)}

/* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
#footer{background:#051a0e;padding:56px 24px 28px}
.footer-grid{max-width:1280px;margin:0 auto;display:grid;grid-template-columns:2fr 1fr 1fr 1fr;gap:40px;padding-bottom:36px;border-bottom:1px solid rgba(255,255,255,.08)}
.footer-brand-logo{font-family:var(--font-display);font-size:24px;font-weight:800;color:var(--orange);letter-spacing:-.04em;margin-bottom:10px}
.footer-brand-logo span{color:rgba(255,255,255,.35)}
.footer-brand p{font-size:13px;color:rgba(255,255,255,.45);line-height:1.7;max-width:260px}
.footer-col h4{font-family:var(--font-display);font-size:13px;font-weight:700;color:#fff;letter-spacing:.04em;text-transform:uppercase;margin-bottom:14px}
.footer-col a{display:block;font-size:13px;color:rgba(255,255,255,.45);margin-bottom:9px;transition:color .15s;cursor:pointer}
.footer-col a:hover{color:var(--orange2)}
.footer-bottom{max-width:1280px;margin:20px auto 0;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;font-size:12px;color:rgba(255,255,255,.3)}
.footer-bottom a{color:rgba(255,255,255,.3);transition:color .15s}
.footer-bottom a:hover{color:rgba(255,255,255,.6)}

/* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
.modal-overlay{display:none;position:fixed;inset:0;background:rgba(26,18,16,.72);z-index:200;align-items:center;justify-content:center;padding:20px;backdrop-filter:blur(2px)}
.modal-overlay.open{display:flex}
.modal{background:#fff;border-radius:var(--r-lg);padding:36px;max-width:460px;width:100%;position:relative;max-height:90vh;overflow-y:auto;box-shadow:var(--shadow-lg)}
.modal-close{position:absolute;top:14px;right:14px;background:var(--cream);border:none;font-size:18px;width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;color:var(--muted);transition:background .15s}
.modal-close:hover{background:var(--border)}
.modal h2{font-family:var(--font-display);font-size:22px;font-weight:700;margin-bottom:6px;letter-spacing:-.02em}
.modal-sub{font-size:13px;color:var(--muted);margin-bottom:20px}
.modal-tabs{display:flex;border:1.5px solid var(--border);border-radius:var(--r-sm);overflow:hidden;margin-bottom:22px}
.modal-tab{flex:1;padding:9px;font-size:14px;font-weight:600;background:none;border:none;color:var(--muted);cursor:pointer;transition:background .15s,color .15s}
.modal-tab.active{background:var(--orange);color:#fff}

/* ‚îÄ‚îÄ PRODUCT DETAIL MODAL ‚îÄ‚îÄ */
.detail-modal{max-width:840px;display:grid;grid-template-columns:1fr 1fr;gap:32px}
.detail-img{aspect-ratio:1;border-radius:var(--r);display:flex;align-items:center;justify-content:center;font-size:100px}
.detail-seller{display:flex;align-items:center;gap:10px;padding:12px;background:var(--cream);border-radius:var(--r-sm);margin-bottom:16px;cursor:pointer}
.detail-seller:hover{background:var(--border2)}
.seller-avatar{width:40px;height:40px;border-radius:50%;background:var(--orange);display:flex;align-items:center;justify-content:center;font-size:18px;flex-shrink:0}
.seller-info-name{font-size:14px;font-weight:600;color:var(--dark)}
.seller-info-loc{font-size:12px;color:var(--green);font-weight:500}
.detail-price{font-family:var(--font-display);font-size:32px;font-weight:800;color:var(--dark);margin:12px 0}
.detail-rating{display:flex;align-items:center;gap:8px;margin-bottom:12px}
.detail-title{font-family:var(--font-display);font-size:20px;font-weight:700;letter-spacing:-.02em;margin-bottom:8px}
.detail-desc{font-size:14px;color:var(--mid);line-height:1.7;margin-bottom:16px}
.detail-meta{font-size:12px;color:var(--muted);display:flex;flex-direction:column;gap:5px;margin-bottom:16px;padding:12px;background:var(--cream);border-radius:var(--r-sm)}
.detail-meta span{display:flex;align-items:center;gap:6px}
.detail-actions{display:flex;gap:10px;flex-wrap:wrap}
.detail-fee-note{font-size:11px;color:var(--muted);margin-top:8px}

/* ‚îÄ‚îÄ CART SIDEBAR ‚îÄ‚îÄ */
.cart-sidebar{position:fixed;top:0;right:0;bottom:0;width:380px;background:#fff;box-shadow:-4px 0 40px rgba(0,0,0,.15);z-index:300;transform:translateX(100%);transition:transform .3s;display:flex;flex-direction:column}
.cart-sidebar.open{transform:translateX(0)}
.cart-header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.cart-header h3{font-family:var(--font-display);font-size:20px;font-weight:700}
.cart-items{flex:1;overflow-y:auto;padding:16px 24px}
.cart-item{display:flex;gap:14px;padding:14px 0;border-bottom:1px solid var(--border2)}
.cart-item-img{width:56px;height:56px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-size:30px;flex-shrink:0}
.cart-item-name{font-size:13px;font-weight:500;margin-bottom:4px}
.cart-item-shop{font-size:11px;color:var(--muted)}
.cart-item-price{font-family:var(--font-display);font-weight:700;font-size:15px;margin-top:4px}
.cart-item-remove{background:none;border:none;color:var(--muted);cursor:pointer;font-size:18px;padding:2px}
.cart-item-remove:hover{color:var(--red)}
.cart-footer{padding:20px 24px;border-top:1px solid var(--border)}
.cart-row{display:flex;justify-content:space-between;font-size:13px;color:var(--muted);margin-bottom:7px}
.cart-row.total{font-size:16px;font-weight:700;color:var(--dark);margin-top:10px;padding-top:10px;border-top:1px solid var(--border)}
.cart-fee{font-size:11px;color:var(--muted);margin-top:4px;text-align:center}
.cart-empty{text-align:center;padding:48px 24px;color:var(--muted)}
.cart-empty-icon{font-size:48px;margin-bottom:12px}

/* ‚îÄ‚îÄ MESSAGES PAGE ‚îÄ‚îÄ */
.messages-layout{display:grid;grid-template-columns:280px 1fr;min-height:500px;border:1px solid var(--border);border-radius:var(--r-lg);overflow:hidden;background:#fff}
.messages-sidebar{border-right:1px solid var(--border);overflow-y:auto}
.messages-header{padding:16px 18px;border-bottom:1px solid var(--border);font-family:var(--font-display);font-size:16px;font-weight:700}
.convo-item{padding:14px 18px;border-bottom:1px solid var(--border2);cursor:pointer;transition:background .15s}
.convo-item:hover,.convo-item.active{background:var(--cream)}
.convo-name{font-size:13px;font-weight:600;margin-bottom:3px;display:flex;justify-content:space-between}
.convo-preview{font-size:12px;color:var(--muted);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.convo-time{font-size:11px;color:var(--muted)}
.convo-unread{width:8px;height:8px;background:var(--orange);border-radius:50%;flex-shrink:0}
.chat-area{display:flex;flex-direction:column}
.chat-header{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
.chat-avatar{width:38px;height:38px;border-radius:50%;background:var(--orange);display:flex;align-items:center;justify-content:center;font-size:16px}
.chat-seller-name{font-size:14px;font-weight:600}
.chat-seller-loc{font-size:11px;color:var(--green)}
.chat-messages{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:14px;min-height:300px}
.msg{max-width:70%;display:flex;flex-direction:column;gap:4px}
.msg.mine{align-self:flex-end;align-items:flex-end}
.msg.theirs{align-self:flex-start;align-items:flex-start}
.msg-bubble{padding:10px 14px;border-radius:18px;font-size:14px;line-height:1.5}
.msg.mine .msg-bubble{background:var(--orange);color:#fff;border-bottom-right-radius:4px}
.msg.theirs .msg-bubble{background:var(--cream);color:var(--dark);border-bottom-left-radius:4px;border:1px solid var(--border)}
.msg-time{font-size:10px;color:var(--muted)}
.chat-input-area{padding:14px 20px;border-top:1px solid var(--border);display:flex;gap:10px}
.chat-input{flex:1;border:1.5px solid var(--border);border-radius:var(--r-pill);padding:9px 16px;font-size:14px;outline:none;transition:border-color .15s}
.chat-input:focus{border-color:var(--orange)}
.chat-send{background:var(--orange);border:none;border-radius:50%;width:38px;height:38px;color:#fff;font-size:18px;display:flex;align-items:center;justify-content:center;cursor:pointer;flex-shrink:0;transition:background .15s}
.chat-send:hover{background:var(--orange2)}

/* ‚îÄ‚îÄ SELLER DASHBOARD ‚îÄ‚îÄ */
.dashboard-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:16px;margin-bottom:32px}
.dash-card{background:#fff;border:1px solid var(--border);border-radius:var(--r);padding:20px;box-shadow:var(--shadow)}
.dash-card-label{font-size:12px;color:var(--muted);font-weight:500;margin-bottom:6px;text-transform:uppercase;letter-spacing:.04em}
.dash-card-value{font-family:var(--font-display);font-size:28px;font-weight:800;color:var(--dark)}
.dash-card-sub{font-size:12px;color:var(--green);margin-top:3px}
.listing-row{display:flex;align-items:center;gap:14px;padding:12px 0;border-bottom:1px solid var(--border2)}
.listing-img{width:48px;height:48px;border-radius:var(--r-sm);display:flex;align-items:center;justify-content:center;font-size:26px;flex-shrink:0}
.listing-name{font-size:14px;font-weight:500;flex:1}
.listing-price{font-family:var(--font-display);font-weight:700;font-size:15px}
.listing-status{font-size:11px;padding:3px 9px;border-radius:var(--r-pill);font-weight:600}
.status-active{background:var(--green-pale);color:var(--green)}
.status-sold{background:#e8f0ff;color:var(--blue)}

/* ‚îÄ‚îÄ PAGE TRANSITIONS ‚îÄ‚îÄ */
.page{animation:fadeIn .25s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}

/* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
@media(max-width:900px){
  .detail-modal{grid-template-columns:1fr}
  .messages-layout{grid-template-columns:1fr}
  .messages-sidebar{display:none}
  .footer-grid{grid-template-columns:1fr 1fr}
}
@media(max-width:600px){
  .nav-link{display:none}
  .hero-h1{font-size:30px}
  .footer-grid{grid-template-columns:1fr}
  .custom-banner{flex-direction:column;text-align:center}
  .custom-banner-icon{font-size:52px}
}
</style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState, useEffect, useRef, useCallback } = React;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DATA
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const CATEGORIES = [
  {id:'all',label:'All Items'},
  {id:'decor',label:'Home D√©cor'},
  {id:'gaming',label:'Miniatures & Gaming'},
  {id:'jewelry',label:'Jewelry'},
  {id:'tech',label:'Tech Parts'},
  {id:'art',label:'Art & Sculpture'},
  {id:'cosplay',label:'Cosplay & Props'},
  {id:'kids',label:'Kids & Toys'},
  {id:'functional',label:'Functional Parts'},
  {id:'custom',label:'Custom Orders'},
  {id:'local',label:'üçÅ Local Only'},
];

const CAT_CARDS = [
  {id:'decor',icon:'üè†',name:'Home D√©cor',count:'482'},
  {id:'gaming',icon:'üé≤',name:'Miniatures & Gaming',count:'319'},
  {id:'jewelry',icon:'üíç',name:'Jewelry',count:'214'},
  {id:'tech',icon:'‚öôÔ∏è',name:'Tech Parts',count:'178'},
  {id:'art',icon:'üé®',name:'Art & Sculpture',count:'263'},
  {id:'kids',icon:'üß∏',name:'Kids & Toys',count:'155'},
  {id:'cosplay',icon:'üé≠',name:'Cosplay & Props',count:'201'},
  {id:'functional',icon:'üîß',name:'Functional Parts',count:'312'},
  {id:'custom',icon:'üí¨',name:'Custom Orders',count:'Open'},
  {id:'decor',icon:'üåø',name:'Planters',count:'143'},
  {id:'tech',icon:'üêæ',name:'Pet Accessories',count:'89'},
  {id:'art',icon:'‚ú®',name:'Ceramics & Vases',count:'97'},
];

const PRODUCTS = [
  {id:1,title:'Geometric Succulent Planter ‚Äî Large Modern Design',shop:'HamiltonMakes',price:28,stars:5,reviews:42,emoji:'üè∫',bg:'linear-gradient(135deg,#e8f4f1,#c8e6e0)',city:'Hamilton',local:true,cat:'decor',desc:'A stunning geometric planter printed in matte PLA, perfect for succulents and small plants. Available in 6 colors.',material:'PLA',delivery:'Pickup or Ship',turnaround:'2-3 days',listingFee:true},
  {id:2,title:"D&D Dragon Miniature ‚Äî Fully Articulated Joints",shop:'DragonsAndDice',price:52,stars:5,reviews:91,emoji:'üêâ',bg:'linear-gradient(135deg,#f4eef8,#e0d0ec)',city:'Hamilton',local:true,cat:'gaming',desc:'Fully articulated flexi dragon miniature, printed in high-resolution resin. Each segment moves independently.',material:'Resin',delivery:'Pickup or Ship',turnaround:'3-5 days',listingFee:true},
  {id:3,title:'Cable Management Clips ‚Äî Set of 20, Custom Fit',shop:'PrintWorksCA',price:14,stars:4,reviews:28,emoji:'üîß',bg:'linear-gradient(135deg,#fef6e4,#fae0a8)',city:'Burlington',local:true,cat:'functional',desc:'Keep your desk tidy with these custom-sized cable clips. Order in any width from 2mm to 20mm.',material:'PETG',delivery:'Pickup available',turnaround:'1-2 days',listingFee:false},
  {id:4,title:'Rocket Ship Desk Ornament ‚Äî Multicolor Filament',shop:'TopRatedPrints',price:36,stars:5,reviews:156,emoji:'üöÄ',bg:'linear-gradient(135deg,#f0f4ff,#ccd8ff)',city:'Toronto',local:false,cat:'art',desc:'Stunning multicolor rocket printed with AMS system. Stands 18cm tall. A perfect gift for space enthusiasts.',material:'PLA Multicolor',delivery:'Ships across Canada',turnaround:'3-4 days',featured:true},
  {id:5,title:'Custom Name Ring ‚Äî Personalized 3D Printed Resin',shop:'GeoJewelCA',price:22,stars:5,reviews:74,emoji:'üíç',bg:'linear-gradient(135deg,#ffefef,#ffd0d0)',city:'Hamilton',local:true,cat:'jewelry',desc:'Personalized name ring printed in durable resin, available in gold, silver, rose gold. Sizes 5-12.',material:'Resin',delivery:'Pickup or Ship',turnaround:'2-3 days',listingFee:true},
  {id:6,title:'Iron Man Helmet ‚Äî Full Scale Wearable Prop',shop:'CosplayForge',price:189,stars:5,reviews:19,emoji:'üé≠',bg:'linear-gradient(135deg,#edfaef,#c0eec8)',city:'Ottawa',local:false,cat:'cosplay',desc:'Full scale Iron Man Mk.50 helmet. Printed in PLA+, sanded and primed. Fits most adults. LED eyes available.',material:'PLA+',delivery:'Ships Canada-wide',turnaround:'7-10 days',featured:true},
  {id:7,title:'Articulated Octopus Fidget Toy',shop:'FlexPrintShop',price:18,stars:5,reviews:203,emoji:'üêô',bg:'linear-gradient(135deg,#fff5e6,#ffe0b2)',city:'Mississauga',local:false,cat:'kids',desc:'The viral flexi octopus toy! Fully articulated, printed in one piece. Available in 12 colors. Great for all ages.',material:'TPU',delivery:'Ships across Canada',turnaround:'2-3 days'},
  {id:8,title:'Minimalist Wall Clock ‚Äî Floating Hands Design',shop:'HomeLayerCA',price:45,stars:5,reviews:38,emoji:'üïê',bg:'linear-gradient(135deg,#f5f5f0,#e8e8e0)',city:'Hamilton',local:true,cat:'decor',desc:'Modern floating-hand wall clock. Minimalist aesthetic fits any room. Battery powered, whisper quiet.',material:'PLA',delivery:'Pickup or Ship',turnaround:'3-4 days',listingFee:true},
  {id:9,title:'Warhammer 40K Space Marine ‚Äî Detailed Terrain Piece',shop:'GrimDarkStudio',price:68,stars:4,reviews:14,emoji:'‚öîÔ∏è',bg:'linear-gradient(135deg,#fffde7,#fff9c4)',city:'Kitchener',local:false,cat:'gaming',desc:'High-detail Space Marine statue for terrain or display. Includes optional base. Primed grey, ready to paint.',material:'Resin 8K',delivery:'Ships across Canada',turnaround:'5-7 days'},
  {id:10,title:'Desk Organizer ‚Äî Modular Hex System',shop:'PrintWorksCA',price:32,stars:5,reviews:67,emoji:'üì¶',bg:'linear-gradient(135deg,#e8f8f5,#c8eee8)',city:'Burlington',local:true,cat:'functional',desc:'Modular hexagonal desk organizer. Mix and match sizes. Magnetic connectors keep pieces together perfectly.',material:'PLA',delivery:'Pickup available',turnaround:'2-3 days'},
  {id:11,title:'Baby Groot Planter ‚Äî Living Decoration',shop:'PopPrintsTO',price:29,stars:5,reviews:312,emoji:'üå±',bg:'linear-gradient(135deg,#e8f5e9,#c8e6c9)',city:'Toronto',local:false,cat:'decor',desc:'Plant your favorite succulent in Baby Groot! 100% biodegradable PLA option available.',material:'PLA',delivery:'Ships across Canada',turnaround:'2-3 days',featured:true},
  {id:12,title:'Custom Pet Portrait Keychain ‚Äî Your Pet in 3D',shop:'GeoJewelCA',price:19,stars:5,reviews:89,emoji:'üêæ',bg:'linear-gradient(135deg,#fce4ec,#f8bbd0)',city:'Hamilton',local:true,cat:'jewelry',desc:'Send us a photo of your pet and we\'ll turn it into a 3D printed keychain. Painted by hand.',material:'Resin',delivery:'Pickup or Ship',turnaround:'5-7 days',listingFee:true},
];

const MESSAGES_DATA = [
  {id:1,seller:'HamiltonMakes',avatar:'üè∫',city:'Hamilton, ON',messages:[
    {from:'seller',text:"Hi! Thanks for your interest in the planter. I can do it in any of our standard colors ‚Äî which do you prefer?",time:'2:14 PM'},
    {from:'me',text:'Hey! I was thinking the matte black version. Do you have it in stock?',time:'2:16 PM'},
    {from:'seller',text:"I do! I can have it ready for pickup by Friday. Want me to reserve one for you?",time:'2:18 PM'},
  ]},
  {id:2,seller:'PrintWorksCA',avatar:'üîß',city:'Burlington, ON',messages:[
    {from:'seller',text:"Hello! I saw your custom cable clip request. What width do you need ‚Äî and how many clips?",time:'Yesterday'},
    {from:'me',text:'I need 12mm clips, quantity 30 please. Is PETG okay or can you do nylon?',time:'Yesterday'},
  ]},
  {id:3,seller:'CosplayForge',avatar:'üé≠',city:'Ottawa, ON',messages:[
    {from:'me',text:'Hi! Is the Iron Man helmet available in size L? I have a larger head lol',time:'Mon'},
    {from:'seller',text:"Absolutely! I can scale it up by 5% for you at no extra charge. Want the LED eye option?",time:'Mon'},
  ]},
];

const PLATFORM_FEE = 0.065;
const LISTING_FEE = 0.20;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STORE (simple state management)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function useStore() {
  const [cart, setCart] = useState([]);
  const [wishlist, setWishlist] = useState(new Set());
  const [user, setUser] = useState(null);
  const [activeCat, setActiveCat] = useState('all');
  const [page, setPage] = useState('home');
  const [cartOpen, setCartOpen] = useState(false);
  const [authOpen, setAuthOpen] = useState(false);
  const [selectedProduct, setSelectedProduct] = useState(null);
  const [activeCity, setActiveCity] = useState('Hamilton');
  const [searchQ, setSearchQ] = useState('');

  const addToCart = (product) => {
    setCart(c => {
      const existing = c.find(i => i.id === product.id);
      if (existing) return c.map(i => i.id === product.id ? {...i, qty: i.qty+1} : i);
      return [...c, {...product, qty:1}];
    });
    setCartOpen(true);
  };

  const removeFromCart = (id) => setCart(c => c.filter(i => i.id !== id));

  const toggleWishlist = (id) => setWishlist(w => {
    const n = new Set(w);
    n.has(id) ? n.delete(id) : n.add(id);
    return n;
  });

  const cartSubtotal = cart.reduce((s,i) => s + i.price * i.qty, 0);
  const cartFee = cartSubtotal * PLATFORM_FEE;
  const cartTotal = cartSubtotal + cartFee;
  const cartCount = cart.reduce((s,i) => s + i.qty, 0);

  const filteredProducts = PRODUCTS.filter(p => {
    const catMatch = activeCat === 'all' || (activeCat === 'local' ? p.local : p.cat === activeCat);
    const searchMatch = !searchQ || p.title.toLowerCase().includes(searchQ.toLowerCase()) || p.shop.toLowerCase().includes(searchQ.toLowerCase());
    return catMatch && searchMatch;
  });

  return {cart,setCart,wishlist,user,setUser,activeCat,setActiveCat,page,setPage,
    cartOpen,setCartOpen,authOpen,setAuthOpen,selectedProduct,setSelectedProduct,
    activeCity,setActiveCity,searchQ,setSearchQ,addToCart,removeFromCart,
    toggleWishlist,cartSubtotal,cartFee,cartTotal,cartCount,filteredProducts};
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   COMPONENTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */

function Stars({n=5, reviews}) {
  const full = Math.floor(n), half = n%1>=0.5;
  return (
    <div className="product-stars">
      {'‚òÖ'.repeat(full)}{half?'¬Ω':''}{'‚òÜ'.repeat(5-full-(half?1:0))}
      {reviews && <span style={{color:'var(--muted)',fontWeight:400}}>({reviews})</span>}
    </div>
  );
}

function ProductCard({product, onView, onAddCart, onWish, wishlisted}) {
  return (
    <div className="product-card" onClick={()=>onView(product)}>
      <div className="product-card-img" style={{background:product.bg}}>
        <span>{product.emoji}</span>
        <div className="product-card-img-overlay"/>
        <div className="product-card-badges">
          {product.local && <span className="badge badge-local">üìç Local</span>}
          {product.featured && !product.local && <span className="badge badge-featured">‚≠ê Featured</span>}
          {product.listingFee === false && <span className="badge badge-custom">Custom</span>}
        </div>
        <button className="product-card-wish" onClick={e=>{e.stopPropagation();onWish(product.id)}}>
          {wishlisted ? '‚ù§Ô∏è' : '‚ô°'}
        </button>
      </div>
      <div className="product-card-body">
        <div className="product-shop">
          {product.local && <span className="shop-dot"/>}
          {product.shop}
        </div>
        <div className="product-title">{product.title}</div>
        <div className="product-footer">
          <div className="product-price">${product.price.toFixed(2)}</div>
          <Stars n={product.stars} reviews={product.reviews} />
        </div>
        <div className="product-location">
          {product.local ? `üìç ${product.city} ¬∑ Pickup available` : `üì¶ Ships from ${product.city}`}
        </div>
      </div>
    </div>
  );
}

function CatCard({cat, onClick}) {
  return (
    <div className="cat-card" onClick={()=>onClick(cat.id)}>
      <span className="cat-card-icon">{cat.icon}</span>
      <span className="cat-card-name">{cat.name}</span>
      <span className="cat-card-count">{cat.count} items</span>
    </div>
  );
}

function Topbar() {
  return (
    <div id="topbar">
      üá®üá¶ Canada's <strong>only</strong> 3D print marketplace ‚Äî <a href="#">Free local pickup</a> ¬∑ Secure checkout ¬∑ 6.5% platform fee supports Canadian makers
    </div>
  );
}

function Navbar({store}) {
  return (
    <nav id="navbar">
      <div className="nav-inner">
        <div className="logo" onClick={()=>store.setPage('home')}>3DPS<span>.ca</span></div>
        <div className="searchbar">
          <input
            placeholder="Search 3D printed items, custom orders‚Ä¶"
            value={store.searchQ}
            onChange={e=>store.setSearchQ(e.target.value)}
            onKeyDown={e=>{ if(e.key==='Enter'){ store.setActiveCat('all'); store.setPage('home');}}}
          />
          <button className="searchbar-btn" onClick={()=>{store.setActiveCat('all');store.setPage('home')}}>üîç</button>
        </div>
        <div className="nav-actions">
          <button className="nav-link" onClick={()=>store.setPage('messages')}>Messages</button>
          <button className="nav-link" onClick={()=>store.setPage('dashboard')}>Sell</button>
          <button className="nav-link" onClick={()=>store.setAuthOpen(true)}>
            {store.user ? store.user.name.split(' ')[0] : 'Sign In'}
          </button>
          <button className="btn btn-primary btn-sm" onClick={()=>store.setAuthOpen(true)}>
            {store.user ? '+ List Item' : 'Start Selling'}
          </button>
          <button className="cart-btn" onClick={()=>store.setCartOpen(true)}>
            üõí {store.cartCount > 0 && <span className="cart-count">{store.cartCount}</span>}
          </button>
        </div>
      </div>
    </nav>
  );
}

function CatNav({store}) {
  return (
    <div id="catnav">
      <div className="catnav-inner">
        {CATEGORIES.map(c => (
          <button key={c.id} className={`catnav-link ${store.activeCat===c.id?'active':''}`}
            onClick={()=>{ store.setActiveCat(c.id); store.setPage('home'); }}>
            {c.label}
          </button>
        ))}
      </div>
    </div>
  );
}

function Hero({store}) {
  return (
    <div id="hero">
      <div className="hero-inner">
        <div className="hero-pill">üá®üá¶ Made in Canada ¬∑ Shipped Across Canada</div>
        <h1 className="hero-h1">
          The Marketplace for<br/><em>3D Printed Everything</em>
        </h1>
        <p className="hero-sub">
          Discover unique items from Canadian makers, request fully custom prints, and support local shops near you.
        </p>
        <div className="hero-ctas">
          <button className="btn btn-primary btn-lg" onClick={()=>store.setActiveCat('all')}>Shop Now</button>
          <button className="btn btn-outline-white btn-lg" onClick={()=>store.setPage('dashboard')}>Become a Seller ‚Üí</button>
        </div>
        <div className="hero-stats">
          {[['2,400+','Listed Items'],['340+','Canadian Makers'],['12,000+','Happy Buyers'],['98%','Satisfaction']].map(([n,l])=>(
            <div key={l} style={{textAlign:'center'}}>
              <div className="hero-stat-num">{n}</div>
              <div className="hero-stat-label">{l}</div>
            </div>
          ))}
        </div>
      </div>
    </div>
  );
}

function LocalBar({store}) {
  const cities = ['Hamilton','Toronto','Ottawa','Vancouver','Calgary','Montr√©al'];
  return (
    <div id="localbar">
      <div className="localbar-inner">
        <span className="localbar-label">üìç Find local sellers:</span>
        <div className="localbar-input">
          <input defaultValue="Hamilton, ON" placeholder="City or postal code" />
          <button>Find</button>
        </div>
        {cities.map(c=>(
          <span key={c} className={`city-chip ${store.activeCity===c?'active':''}`}
            onClick={()=>store.setActiveCity(c)}>{c}</span>
        ))}
        <div className="platform-fee-note">üõ°Ô∏è Secure checkout ¬∑ 6.5% platform fee</div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ HOME PAGE ‚îÄ‚îÄ‚îÄ */
function HomePage({store}) {
  const localProducts = store.filteredProducts.filter(p=>p.local && p.city===store.activeCity);
  const featuredProducts = store.filteredProducts.filter(p=>p.featured);
  const allFiltered = store.filteredProducts;

  return (
    <div className="page">
      <Hero store={store}/>
      <LocalBar store={store}/>

      {/* LOCAL TRENDING */}
      {localProducts.length > 0 && (
        <section className="section">
          <div className="section-inner">
            <div className="section-header">
              <div className="section-title">Trending Near <span>{store.activeCity}</span> üìç</div>
              <span className="section-link" onClick={()=>store.setActiveCat('local')}>See all local ‚Üí</span>
            </div>
            <div className="product-grid">
              {localProducts.slice(0,6).map(p=>(
                <ProductCard key={p.id} product={p}
                  onView={store.setSelectedProduct}
                  onAddCart={store.addToCart}
                  onWish={store.toggleWishlist}
                  wishlisted={store.wishlist.has(p.id)}/>
              ))}
            </div>
          </div>
        </section>
      )}

      {/* CATEGORIES */}
      <section className="section" style={{background:'var(--white)',borderTop:'1px solid var(--border)',borderBottom:'1px solid var(--border)'}}>
        <div className="section-inner">
          <div className="section-header">
            <div className="section-title">Browse by <span>Category</span></div>
          </div>
          <div className="cat-grid">
            {CAT_CARDS.map((c,i)=><CatCard key={i} cat={c} onClick={store.setActiveCat}/>)}
          </div>
        </div>
      </section>

      {/* ALL / SEARCH RESULTS */}
      <section className="section">
        <div className="section-inner">
          <div className="section-header">
            <div className="section-title">
              {store.searchQ ? <>Results for <span>"{store.searchQ}"</span></> :
               store.activeCat === 'all' ? <>All <span>Items</span></> :
               <><span>{CATEGORIES.find(c=>c.id===store.activeCat)?.label}</span></>}
              <span style={{fontSize:'14px',fontWeight:'400',color:'var(--muted)',marginLeft:'10px'}}>
                ({allFiltered.length} items)
              </span>
            </div>
          </div>
          {allFiltered.length === 0 ? (
            <div style={{textAlign:'center',padding:'48px',color:'var(--muted)'}}>
              <div style={{fontSize:'48px',marginBottom:'12px'}}>üîç</div>
              <div style={{fontSize:'16px',fontWeight:'600',marginBottom:'8px'}}>No items found</div>
              <p>Try a different search or <span style={{color:'var(--orange)',cursor:'pointer'}} onClick={()=>store.setPage('messages')}>request a custom print</span></p>
            </div>
          ) : (
            <div className="product-grid">
              {allFiltered.map(p=>(
                <ProductCard key={p.id} product={p}
                  onView={store.setSelectedProduct}
                  onAddCart={store.addToCart}
                  onWish={store.toggleWishlist}
                  wishlisted={store.wishlist.has(p.id)}/>
              ))}
            </div>
          )}
        </div>
      </section>

      {/* CUSTOM ORDER */}
      <section className="section" style={{background:'var(--white)',borderTop:'1px solid var(--border)'}}>
        <div className="section-inner">
          <div className="custom-banner">
            <div className="custom-banner-icon">üí¨</div>
            <div>
              <h2>Need Something Printed? Just Ask.</h2>
              <p>Can't find it? Describe what you need and local makers will quote you directly. No design skills needed ‚Äî just explain your idea.</p>
              <button className="btn btn-primary" onClick={()=>store.setPage('messages')}>
                Request a Custom Print ‚Üí
              </button>
            </div>
          </div>
        </div>
      </section>

      {/* HOW IT WORKS */}
      <section id="how" className="section">
        <div className="section-inner">
          <div className="section-title" style={{color:'#fff',textAlign:'center'}}>
            How <span>3DPS.ca</span> Works
          </div>
          <div className="steps-grid">
            {[
              ['üîç','01','Browse or Request','Shop ready-made items or describe what you want. Our makers can print almost anything.'],
              ['üí¨','02','Chat with Makers','Message local sellers directly. Get quotes, discuss details, and approve your design.'],
              ['üõ°Ô∏è','03','Secure Checkout','Pay safely through 3DPS.ca. Our 6.5% fee keeps the platform running and protects every order.'],
              ['üì¶','04','Pickup or Delivery','Collect from the maker locally ‚Äî or have it shipped anywhere in Canada.'],
            ].map(([icon,num,title,desc])=>(
              <div key={num} className="step-card">
                <div className="step-icon">{icon}</div>
                <div className="step-num">Step {num}</div>
                <div className="step-title">{title}</div>
                <div className="step-desc">{desc}</div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* SELLER CTA */}
      <div id="seller-cta">
        <h2>Turn Your 3D Printer Into Income üí∞</h2>
        <p>Join hundreds of Canadian makers earning real money from their printers. Free to start ‚Äî we only earn when you do.</p>
        <button className="btn btn-white btn-lg" onClick={()=>{store.setAuthOpen(true)}}>
          Open Your Shop ‚Äî It's Free
        </button>
        <div className="seller-perks">
          {[['‚úÖ','Free to list'],['üí≥','Pay on sale only'],['üìç','Local + national buyers'],['üí¨','Built-in messaging'],['üá®üá¶','100% Canadian']].map(([i,l])=>(
            <div key={l} className="seller-perk"><span>{i}</span>{l}</div>
          ))}
        </div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ PRODUCT DETAIL MODAL ‚îÄ‚îÄ‚îÄ */
function ProductModal({product, onClose, onAddCart, onMessage}) {
  if (!product) return null;
  return (
    <div className="modal-overlay open" onClick={e=>{if(e.target.classList.contains('modal-overlay'))onClose()}}>
      <div className="modal detail-modal">
        <button className="modal-close" onClick={onClose}>‚úï</button>
        <div className="detail-img" style={{background:product.bg}}>{product.emoji}</div>
        <div>
          <div className="detail-seller">
            <div className="seller-avatar">{product.emoji}</div>
            <div>
              <div className="seller-info-name">{product.shop}</div>
              <div className="seller-info-loc">üìç {product.city} ¬∑ {product.local ? 'Pickup available':'Ships Canada-wide'}</div>
            </div>
            <div style={{marginLeft:'auto',display:'flex',gap:'8px'}}>
              {product.local && <span className="badge badge-local">Local</span>}
            </div>
          </div>

          <div className="detail-title">{product.title}</div>
          <div className="detail-rating"><Stars n={product.stars} reviews={product.reviews}/></div>
          <div className="detail-price">${product.price.toFixed(2)} CAD</div>

          <div className="detail-desc">{product.desc}</div>

          <div className="detail-meta">
            <span>üé® <strong>Material:</strong> {product.material}</span>
            <span>üì¶ <strong>Delivery:</strong> {product.delivery}</span>
            <span>‚è±Ô∏è <strong>Turnaround:</strong> {product.turnaround}</span>
          </div>

          <div className="detail-actions">
            <button className="btn btn-primary flex-1" onClick={()=>{onAddCart(product);onClose()}}>
              Add to Cart
            </button>
            <button className="btn btn-outline" onClick={()=>{onMessage(product);onClose()}}>
              üí¨ Message Seller
            </button>
          </div>
          <div className="detail-fee-note">
            üõ°Ô∏è Secure checkout ¬∑ ${(product.price * PLATFORM_FEE).toFixed(2)} platform fee applies at checkout ¬∑ Buyer protection included
          </div>
        </div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ AUTH MODAL ‚îÄ‚îÄ‚îÄ */
function AuthModal({onClose, onLogin}) {
  const [tab, setTab] = useState('buyer');
  const [form, setForm] = useState({firstName:'',lastName:'',email:'',password:'',city:'',shopName:'',printer:'Bambu Lab X1'});
  const set = k => e => setForm(f=>({...f,[k]:e.target.value}));

  const handleSubmit = () => {
    const name = `${form.firstName} ${form.lastName}`.trim() || form.email.split('@')[0];
    onLogin({name, email:form.email, type:tab, shopName:form.shopName, city:form.city});
    onClose();
  };

  return (
    <div className="modal-overlay open" onClick={e=>{if(e.target.classList.contains('modal-overlay'))onClose()}}>
      <div className="modal">
        <button className="modal-close" onClick={onClose}>‚úï</button>
        <h2>Welcome to 3DPS.ca</h2>
        <p className="modal-sub">Canada's 3D print marketplace ‚Äî buy, sell, or request custom prints.</p>
        <div className="modal-tabs">
          <button className={`modal-tab ${tab==='buyer'?'active':''}`} onClick={()=>setTab('buyer')}>I'm a Buyer</button>
          <button className={`modal-tab ${tab==='seller'?'active':''}`} onClick={()=>setTab('seller')}>I'm a Seller / Maker</button>
        </div>

        {tab==='seller' && (
          <div className="input-group">
            <label>Shop Name</label>
            <input className="input" placeholder="e.g. HamiltonMakes" value={form.shopName} onChange={set('shopName')}/>
          </div>
        )}
        <div className="input-row">
          <div className="input-group"><label>First Name</label><input className="input" placeholder="Jane" value={form.firstName} onChange={set('firstName')}/></div>
          <div className="input-group"><label>Last Name</label><input className="input" placeholder="Doe" value={form.lastName} onChange={set('lastName')}/></div>
        </div>
        <div className="input-group"><label>Email</label><input className="input" type="email" placeholder="jane@email.com" value={form.email} onChange={set('email')}/></div>
        <div className="input-group"><label>Password</label><input className="input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" value={form.password} onChange={set('password')}/></div>
        <div className="input-group"><label>City / Postal Code</label><input className="input" placeholder="Hamilton, ON or L8P 4W1" value={form.city} onChange={set('city')}/></div>
        {tab==='seller' && (
          <div className="input-group">
            <label>Primary Printer</label>
            <select className="input" value={form.printer} onChange={set('printer')}>
              {['Bambu Lab X1','Bambu Lab A1','Prusa MK4','Creality Ender 3','Creality K1','Formlabs Form 3','Elegoo Saturn (Resin)','Other'].map(p=><option key={p}>{p}</option>)}
            </select>
          </div>
        )}
        {tab==='seller' && (
          <div style={{background:'var(--green-pale)',border:'1px solid #b2ddc0',borderRadius:'var(--r-sm)',padding:'12px',fontSize:'12px',color:'var(--green)',marginBottom:'14px',lineHeight:'1.6'}}>
            <strong>Seller fees:</strong> $0.20 listing fee per item + 6.5% transaction fee on each sale. No monthly subscription. We only earn when you do.
          </div>
        )}
        <button className="btn btn-primary" style={{width:'100%'}} onClick={handleSubmit}>
          {tab==='seller' ? 'Open My Shop ‚Äî Free ‚Üí' : 'Create Account ‚Üí'}
        </button>
        <div style={{textAlign:'center',fontSize:'13px',color:'var(--muted)',marginTop:'12px'}}>
          Already have an account? <span style={{color:'var(--orange)',cursor:'pointer',fontWeight:'600'}}>Sign In</span>
        </div>
      </div>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ CART SIDEBAR ‚îÄ‚îÄ‚îÄ */
function CartSidebar({store}) {
  return (
    <>
      {store.cartOpen && <div style={{position:'fixed',inset:0,background:'rgba(0,0,0,.4)',zIndex:299}} onClick={()=>store.setCartOpen(false)}/>}
      <div className={`cart-sidebar ${store.cartOpen?'open':''}`}>
        <div className="cart-header">
          <h3>üõí Your Cart ({store.cartCount})</h3>
          <button className="btn-ghost" onClick={()=>store.setCartOpen(false)}>‚úï</button>
        </div>
        <div className="cart-items">
          {store.cart.length === 0 ? (
            <div className="cart-empty">
              <div className="cart-empty-icon">üõí</div>
              <div style={{fontWeight:'600',marginBottom:'6px'}}>Your cart is empty</div>
              <p>Discover unique 3D printed items from Canadian makers.</p>
            </div>
          ) : (
            store.cart.map(item=>(
              <div key={item.id} className="cart-item">
                <div className="cart-item-img" style={{background:item.bg}}>{item.emoji}</div>
                <div style={{flex:1}}>
                  <div className="cart-item-name">{item.title}</div>
                  <div className="cart-item-shop">{item.shop} ¬∑ {item.city}</div>
                  <div className="cart-item-price">${(item.price*item.qty).toFixed(2)} {item.qty>1&&`(√ó${item.qty})`}</div>
                </div>
                <button className="cart-item-remove" onClick={()=>store.removeFromCart(item.id)}>√ó</button>
              </div>
            ))
          )}
        </div>
        {store.cart.length > 0 && (
          <div className="cart-footer">
            <div className="cart-row"><span>Subtotal</span><span>${store.cartSubtotal.toFixed(2)}</span></div>
            <div className="cart-row"><span>Platform fee (6.5%)</span><span>${store.cartFee.toFixed(2)}</span></div>
            <div className="cart-row"><span>Shipping</span><span>Calculated at checkout</span></div>
            <div className="cart-row total"><span>Total</span><span>${store.cartTotal.toFixed(2)}</span></div>
            <button className="btn btn-primary" style={{width:'100%',marginTop:'12px'}}>
              Proceed to Checkout
            </button>
            <div className="cart-fee">üõ°Ô∏è Buyer protection on every order</div>
          </div>
        )}
      </div>
    </>
  );
}

/* ‚îÄ‚îÄ‚îÄ MESSAGES PAGE ‚îÄ‚îÄ‚îÄ */
function MessagesPage({store}) {
  const [activeConvo, setActiveConvo] = useState(0);
  const [convos, setConvos] = useState(MESSAGES_DATA);
  const [input, setInput] = useState('');
  const messagesEndRef = useRef(null);

  const sendMessage = () => {
    if (!input.trim()) return;
    setConvos(c => c.map((convo,i) => i===activeConvo ? {
      ...convo,
      messages:[...convo.messages, {from:'me', text:input, time:'Now'}]
    } : convo));
    setInput('');
    setTimeout(()=>messagesEndRef.current?.scrollIntoView({behavior:'smooth'}),50);
  };

  const convo = convos[activeConvo];

  return (
    <div className="page">
      <section className="section">
        <div className="section-inner">
          <div className="section-header">
            <div className="section-title">üí¨ <span>Messages</span></div>
            <button className="btn btn-primary btn-sm" onClick={()=>store.setSelectedProduct(PRODUCTS[0])}>+ New Custom Request</button>
          </div>
          <div className="messages-layout">
            <div className="messages-sidebar">
              <div className="messages-header">Conversations</div>
              {convos.map((c,i)=>(
                <div key={c.id} className={`convo-item ${i===activeConvo?'active':''}`} onClick={()=>setActiveConvo(i)}>
                  <div className="convo-name">
                    <span>{c.seller}</span>
                    <span className="convo-time">{c.messages[c.messages.length-1].time}</span>
                  </div>
                  <div style={{display:'flex',alignItems:'center',gap:'6px'}}>
                    <div className="convo-preview">{c.messages[c.messages.length-1].text}</div>
                    {i===0&&<div className="convo-unread"/>}
                  </div>
                </div>
              ))}
            </div>
            <div className="chat-area">
              <div className="chat-header">
                <div className="chat-avatar">{convo.avatar}</div>
                <div>
                  <div className="chat-seller-name">{convo.seller}</div>
                  <div className="chat-seller-loc">üìç {convo.city}</div>
                </div>
                <button className="btn btn-outline btn-sm" style={{marginLeft:'auto'}}>
                  View Shop
                </button>
              </div>
              <div className="chat-messages">
                <div style={{textAlign:'center',fontSize:'11px',color:'var(--muted)',padding:'8px',background:'var(--orange-pale)',borderRadius:'var(--r-sm)',marginBottom:'8px'}}>
                  üõ°Ô∏è Keep conversations on 3DPS.ca for buyer &amp; seller protection. Payments processed securely through our platform.
                </div>
                {convo.messages.map((m,i)=>(
                  <div key={i} className={`msg ${m.from==='me'?'mine':'theirs'}`}>
                    <div className="msg-bubble">{m.text}</div>
                    <div className="msg-time">{m.time}</div>
                  </div>
                ))}
                <div ref={messagesEndRef}/>
              </div>
              <div className="chat-input-area">
                <input className="chat-input" placeholder="Type your message‚Ä¶"
                  value={input} onChange={e=>setInput(e.target.value)}
                  onKeyDown={e=>{if(e.key==='Enter')sendMessage()}}/>
                <button className="chat-send" onClick={sendMessage}>‚û§</button>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ SELLER DASHBOARD ‚îÄ‚îÄ‚îÄ */
function DashboardPage({store}) {
  const [listings] = useState(PRODUCTS.filter(p=>['HamiltonMakes','PrintWorksCA','GeoJewelCA'].includes(p.shop)).slice(0,5));

  if (!store.user) {
    return (
      <div className="page">
        <section className="section">
          <div className="section-inner" style={{textAlign:'center',padding:'80px 24px'}}>
            <div style={{fontSize:'56px',marginBottom:'16px'}}>üè™</div>
            <h2 style={{fontFamily:'var(--font-display)',fontSize:'28px',marginBottom:'12px'}}>Start Selling on 3DPS.ca</h2>
            <p style={{color:'var(--muted)',maxWidth:'440px',margin:'0 auto 24px',lineHeight:'1.7'}}>
              Join 340+ Canadian makers earning from their 3D printers. Free to list ‚Äî we only earn when you do.
            </p>
            <div style={{display:'flex',gap:'16px',justifyContent:'center',marginBottom:'32px',flexWrap:'wrap'}}>
              {[['$0.20','Listing fee per item'],['6.5%','Transaction fee'],['$0','Monthly subscription'],['‚àû','Items you can list']].map(([v,l])=>(
                <div key={l} className="card" style={{padding:'20px 28px',textAlign:'center',minWidth:'130px'}}>
                  <div style={{fontFamily:'var(--font-display)',fontSize:'26px',fontWeight:'800',color:'var(--orange)'}}>{v}</div>
                  <div style={{fontSize:'12px',color:'var(--muted)',marginTop:'4px'}}>{l}</div>
                </div>
              ))}
            </div>
            <button className="btn btn-primary btn-lg" onClick={()=>store.setAuthOpen(true)}>Open Your Shop ‚Äî Free</button>
          </div>
        </section>
      </div>
    );
  }

  return (
    <div className="page">
      <section className="section">
        <div className="section-inner">
          <div className="section-header">
            <div className="section-title">Welcome back, <span>{store.user.name.split(' ')[0]}</span> üëã</div>
            <button className="btn btn-primary btn-sm">+ Add Listing ($0.20)</button>
          </div>

          <div className="dashboard-grid">
            {[
              {label:'Total Sales',value:'$1,284.00',sub:'+18% this month'},
              {label:'Active Listings',value:'12',sub:'3 pending'},
              {label:'Unread Messages',value:'5',sub:'2 new quotes'},
              {label:'This Month Earned',value:'$387.40',sub:'After 6.5% fee'},
              {label:'Avg. Rating',value:'4.9 ‚òÖ',sub:'From 142 reviews'},
            ].map(d=>(
              <div key={d.label} className="dash-card">
                <div className="dash-card-label">{d.label}</div>
                <div className="dash-card-value">{d.value}</div>
                <div className="dash-card-sub">{d.sub}</div>
              </div>
            ))}
          </div>

          <div className="card" style={{padding:'24px'}}>
            <div className="section-header" style={{marginBottom:'16px'}}>
              <div style={{fontFamily:'var(--font-display)',fontSize:'18px',fontWeight:'700'}}>Your Listings</div>
              <span className="section-link">Manage all ‚Üí</span>
            </div>
            {listings.map(l=>(
              <div key={l.id} className="listing-row">
                <div className="listing-img" style={{background:l.bg}}>{l.emoji}</div>
                <div style={{flex:1}}>
                  <div className="listing-name">{l.title}</div>
                  <div style={{fontSize:'12px',color:'var(--muted)'}}>{l.reviews} sales ¬∑ {l.stars}‚òÖ</div>
                </div>
                <div className="listing-price">${l.price.toFixed(2)}</div>
                <span className="listing-status status-active">Active</span>
                <button className="btn btn-outline btn-sm">Edit</button>
              </div>
            ))}
          </div>

          <div style={{marginTop:'24px',background:'var(--orange-pale)',border:'1.5px solid #ffd0a8',borderRadius:'var(--r)',padding:'20px 24px',display:'flex',gap:'16px',alignItems:'center',flexWrap:'wrap'}}>
            <span style={{fontSize:'28px'}}>‚≠ê</span>
            <div style={{flex:1}}>
              <div style={{fontWeight:'700',marginBottom:'4px'}}>Boost Your Listings with Featured Placement</div>
              <div style={{fontSize:'13px',color:'var(--mid)'}}>Get 5√ó more visibility. Featured listings appear at the top of search results and on the homepage. Starting at $2.99/week per listing.</div>
            </div>
            <button className="btn btn-primary btn-sm">Promote Listing</button>
          </div>
        </div>
      </section>
    </div>
  );
}

/* ‚îÄ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ‚îÄ */
function Footer({store}) {
  return (
    <footer id="footer">
      <div className="footer-grid">
        <div>
          <div className="footer-brand-logo">3DPS<span>.ca</span></div>
          <p>Canada's marketplace connecting 3D print makers with buyers. Find unique items, request custom prints, and support local shops.</p>
        </div>
        {[
          {h:'Shop',links:[
            {label:'Browse All Items', action:()=>{store.setActiveCat('all');store.setPage('home')}},
            {label:'Local Sellers', action:()=>{store.setActiveCat('local');store.setPage('home')}},
            {label:'Custom Requests', action:()=>store.setPage('messages')},
            {label:'Categories', action:()=>window.location.href='categories.html'},
            {label:'New Arrivals', action:()=>{store.setActiveCat('all');store.setPage('home')}},
            {label:'Gift Ideas', action:()=>{store.setActiveCat('all');store.setPage('home')}},
          ]},
          {h:'Sell',links:[
            {label:'Open a Shop', action:()=>window.location.href='open-shop.html'},
            {label:'Seller Handbook', action:()=>window.location.href='open-shop.html'},
            {label:'Fees & Pricing', action:()=>window.location.href='fees.html'},
            {label:'Seller Forum', action:()=>alert('Seller Forum coming soon!')},
            {label:'Print Materials', action:()=>alert('Print Materials Guide coming soon!')},
            {label:'Analytics', action:()=>store.setPage('dashboard')},
          ]},
          {h:'About',links:[
            {label:'About 3DPS.ca', action:()=>alert('About page coming soon!')},
            {label:'Help Centre', action:()=>alert('Help Centre coming soon!')},
            {label:'Trust & Safety', action:()=>alert('Trust & Safety page coming soon!')},
            {label:'Careers', action:()=>alert('Careers page coming soon!')},
            {label:'Press', action:()=>alert('Press page coming soon!')},
            {label:'Contact Us', action:()=>store.setPage('messages')},
          ]},
        ].map(col=>(
          <div key={col.h} className="footer-col">
            <h4>{col.h}</h4>
            {col.links.map(l=><a key={l.label} onClick={l.action} style={{cursor:'pointer'}}>{l.label}</a>)}
          </div>
        ))}
      </div>
      <div className="footer-bottom">
        <span>¬© 2025 3DPS.ca Inc. All rights reserved.</span>
        <div style={{display:'flex',gap:'12px',alignItems:'center'}}>
          <span>üá®üá¶ Made in Canada</span>
          <a>Privacy</a> <a>Terms</a> <a>Cookies</a>
        </div>
      </div>
    </footer>
  );
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   APP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function App() {
  const store = useStore();

  // Handle hash-based routing for GitHub Pages
  useEffect(() => {
    const handleHash = () => {
      const h = window.location.hash.replace('#','');
      if (['home','messages','dashboard'].includes(h)) store.setPage(h);
    };
    window.addEventListener('hashchange', handleHash);
    return ()=>window.removeEventListener('hashchange', handleHash);
  }, []);

  useEffect(() => {
    window.location.hash = store.page;
    window.scrollTo({top: store.page==='home' ? 0 : 0});
  }, [store.page]);

  const renderPage = () => {
    switch(store.page) {
      case 'messages': return <MessagesPage store={store}/>;
      case 'dashboard': return <DashboardPage store={store}/>;
      default: return <HomePage store={store}/>;
    }
  };

  return (
    <>
      <Topbar/>
      <Navbar store={store}/>
      <CatNav store={store}/>
      {renderPage()}
      <Footer store={store}/>

      {/* CART SIDEBAR */}
      <CartSidebar store={store}/>

      {/* PRODUCT DETAIL MODAL */}
      {store.selectedProduct && (
        <ProductModal
          product={store.selectedProduct}
          onClose={()=>store.setSelectedProduct(null)}
          onAddCart={store.addToCart}
          onMessage={()=>{store.setPage('messages');store.setSelectedProduct(null)}}
        />
      )}

      {/* AUTH MODAL */}
      {store.authOpen && (
        <AuthModal
          onClose={()=>store.setAuthOpen(false)}
          onLogin={user=>store.setUser(user)}
        />
      )}
    </>
  );
}

ReactDOM.createRoot(document.getElementById('root')).render(<App/>);
</script>
</body>
</html>
